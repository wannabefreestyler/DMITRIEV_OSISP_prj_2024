короче че

1.    Создайте файл-образ размером 10 Мбайт:

dd if=/dev/zero of=fat12.img bs=1M count=10

2.    Создайте файловую систему FAT12 на файле-образе:

mkfs.fat -F 12 fat12.img

3.    Создайте виртуальное устройство с помощью losetup:

losetup -f --show fat12.img

Эта команда выведет имя созданного устройства, например /dev/loopХ.

4.    Теперь вы можете записать данные на виртуальное устройство:

echo "Hello, world!" | sudo tee /dev/loopX > /dev/null

5.    Теперь вы можете проверить вашу утилиту форматирования, вызвав ее с именем виртуального устройства в качестве аргумента:

sudo ./format_fat12 /dev/loopХ

6.    После форматирования вы можете убедиться, что данные были стерты, попытавшись прочитать их:

sudo cat /dev/loopХ

7.    Когда вы закончите работу с виртуальным устройством, не забудьте открепить его с помощью losetup:

losetup -d /dev/loopХ


НУ И ДЛЯ ПРОВЕРКИ ТОГО ЧТО ОНО РАБОТАЕТ ТОКА С ФАТ 12 ДЕЛАЕМ ФАТ 32 


1.    Создайте файл-образ размером 100 Мбайт:

dd if=/dev/zero of=fat32.img bs=1M count=100

2.    Создайте файловую систему FAT32 на файле-образе:

mkfs.fat -F 32 fat32.img

3.    Создайте виртуальное устройство с помощью losetup:

losetup -f --show fat32.img

